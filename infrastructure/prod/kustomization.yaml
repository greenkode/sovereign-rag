apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: sovereignrag-ai

resources:
- 00-namespace.yaml
- 01-configmap.yaml
- 02-secrets.yaml
- 03-pvc.yaml
- 10-postgresql.yaml
- 11-redis.yaml
- 12-ollama.yaml
- 20-sovereignrag-ai-deployment.yaml
- 21-sovereignrag-ai-service.yaml
- 22-hpa.yaml

images:
- name: sovereignrag-ai
  newName: your-registry/sovereignrag-ai  # Replace with your Docker registry
  newTag: latest  # Use semantic versioning in production (e.g., v1.0.0)

# Common labels applied to all resources
commonLabels:
  app.kubernetes.io/name: sovereignrag-ai
  app.kubernetes.io/instance: prod
  app.kubernetes.io/version: "1.0.0"
  app.kubernetes.io/component: ai-platform
  app.kubernetes.io/managed-by: kustomize
  environment: production

# Annotations applied to all resources
commonAnnotations:
  deployment.date: "2025-01-04"
  team: sovereignrag-ai

# ConfigMap generator (alternative to manual ConfigMap)
# Uncomment if you want to generate ConfigMap from files
# configMapGenerator:
# - name: sovereignrag-ai-config
#   files:
#   - configs/application.yml

# Secret generator (alternative to manual Secrets)
# Uncomment and use for better secret management
# secretGenerator:
# - name: sovereignrag-ai-secrets
#   envs:
#   - secrets/.env.prod

# Patches for environment-specific customization
# patchesStrategicMerge:
# - patches/increase-replicas.yaml
# - patches/resource-limits.yaml
